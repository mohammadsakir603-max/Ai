<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vixora AI</title>

<style>
body{
  margin:0;
  background:#0b0f14;
  color:#fff;
  font-family:Poppins,system-ui;
}
.app{
  max-width:420px;
  margin:auto;
  height:100vh;
  display:flex;
  flex-direction:column;
}
.header{
  padding:14px;
  text-align:center;
  font-weight:600;
  border-bottom:1px solid #222;
}
.chat{
  flex:1;
  padding:12px;
  overflow-y:auto;
}
.msg{
  padding:12px;
  border-radius:14px;
  margin-bottom:10px;
  max-width:85%;
}
.user{ background:#2563eb; margin-left:auto; }
.ai{ background:#1f2933; }
pre{
  background:#000;
  padding:12px;
  border-radius:10px;
  position:relative;
}
.copy{
  position:absolute;
  top:6px;
  right:8px;
  font-size:12px;
  cursor:pointer;
  color:#22c55e;
}
.input{
  display:flex;
  gap:10px;
  padding:10px;
  border-top:1px solid #222;
}
input{
  flex:1;
  padding:12px;
  background:#0b0f14;
  border:1px solid #333;
  color:#fff;
  border-radius:10px;
}
button{
  border:1px solid #2563eb;
  background:transparent;
  color:#2563eb;
  padding:0 18px;
  border-radius:10px;
}
button:active{ transform:scale(.9); }
</style>
</head>

<body>
<div class="app">
  <div class="header">Vixora AI</div>
  <div class="chat" id="chat">
    <div class="msg ai">How can I help you?</div>
  </div>
  <div class="input">
    <input id="input" placeholder="Ask with Vixora">
    <button onclick="send()">âž¤</button>
  </div>
</div>

<script>
const chat=document.getElementById("chat");
const input=document.getElementById("input");

function add(text,type){
  const d=document.createElement("div");
  d.className="msg "+type;

  if(text.includes("```")){
    const code=text.replace(/```[a-z]*|```/g,"");
    d.innerHTML=`<pre><span class="copy" onclick="navigator.clipboard.writeText(\`${code}\`)">Copy</span><code>${code}</code></pre>`;
  }else{
    d.textContent=text;
  }
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

async function send(){
  const t=input.value.trim();
  if(!t) return;
  add(t,"user");
  input.value="";
  const r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});
  const d=await r.json();
  add(d.reply,"ai");
}

input.onkeydown=e=>{ if(e.key==="Enter") send(); }
</script>
</body>
</html>
